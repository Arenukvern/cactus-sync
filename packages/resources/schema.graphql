"""
@model
@cactusSync
TODO: make directive hasId
@hasId
"""
type Todo {
  # TODO: replace type with ID
  _id: string!
  """
  The id, which will be created, if
  the model was created offline
  """
  _clientId: string
  _version: number!
  # TODO: replace type with Timestamp
  _lastUpdatedAt: number!
  title: string
  """
  @manyToOne(field: 'todos')
  """
  user: User
}

"""
@model
@cactusSync
"""
type User {
  # TODO: replace type with ID
  _id: string
  """
  The id, which will be created, if
  the model was created offline
  """
  _clientId: string
  _version: number
  # TODO: replace type with Timestamp
  _lastUpdatedAt: number
  name: string
  """
  @oneToMany(field: 'user')
  """
  todos: [User]!
}

"""
@model
@cactusSync
This model keeps all changes for every model any made
FIXME: Maybe schema needs to work this way (first open, after offline):
client queried CactusSyncTimestamp first.
If new timestamps occured, then request changes
"""
type CactusSyncTimestamp{
  # TODO: replace type with ID
  _id: string
  """
  The id, which will be created, if
  the model was created offline
  """
  _clientId: string
  # TODO: add Timestamp
  # TODO: must be indexed for fastest finds
  timestamp: number
  # FIXME:
  changeType: DatabaseChangeType
  # model __typename
  modelTypename: string
  # TODO: replace with ID
  changedId: string
}
"""
Named according to spec: https://graphql-rules.com/rules/naming-enum
"""
enum DatabaseChangeType {
  CREATE = 1,
  UPDATE = 2,
  DELETE = 3,
}